# FerrumDeck Environment Configuration
# =====================================
# Copy this file to .env and fill in your values

# =============================================================================
# Application
# =============================================================================
FERRUMDECK_ENV=development
FERRUMDECK_LOG_LEVEL=debug
FERRUMDECK_LOG_FORMAT=pretty  # pretty | json

# =============================================================================
# Control Plane (Gateway)
# =============================================================================
GATEWAY_HOST=0.0.0.0
GATEWAY_PORT=8080
GATEWAY_WORKERS=4

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
DATABASE_URL=postgres://ferrumdeck:ferrumdeck@localhost:5433/ferrumdeck
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5

# =============================================================================
# Redis (Queue + Cache)
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_QUEUE_PREFIX=fd:queue:
REDIS_CACHE_PREFIX=fd:cache:

# =============================================================================
# OpenTelemetry
# =============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=ferrumdeck
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=1.0

# =============================================================================
# LLM Providers
# =============================================================================
# Anthropic
ANTHROPIC_API_KEY=sk-ant-xxx

# OpenAI
OPENAI_API_KEY=sk-xxx

# Default model routing
DEFAULT_LLM_PROVIDER=anthropic  # anthropic | openai
DEFAULT_MODEL=claude-sonnet-4-20250514

# =============================================================================
# MCP (Tool Router)
# =============================================================================
MCP_SERVERS_CONFIG=./config/mcp-servers.yaml
MCP_DEFAULT_TIMEOUT_MS=30000

# =============================================================================
# Security
# =============================================================================
# API Key for development (generate a real one for production)
API_KEY_HASH_SECRET=change-me-in-production

# =============================================================================
# OAuth2/JWT Authentication (Optional)
# =============================================================================
# Set OAUTH2_ENABLED=true to enable JWT token validation
# Supports providers like Auth0, Okta, Keycloak, etc.
OAUTH2_ENABLED=false

# JWKS endpoint for public key fetching (required if OAUTH2_ENABLED=true)
# Examples:
#   Auth0: https://your-tenant.auth0.com/.well-known/jwks.json
#   Okta: https://your-org.okta.com/oauth2/default/v1/keys
#   Keycloak: https://your-server/realms/your-realm/protocol/openid-connect/certs
OAUTH2_JWKS_URI=

# Expected token issuer (iss claim)
OAUTH2_ISSUER=

# Expected token audience (aud claim) - usually your API identifier
OAUTH2_AUDIENCE=

# Claim name containing tenant ID (default: tenant_id)
# Can be customized per provider (e.g., "org_id", "custom:tenant")
OAUTH2_TENANT_CLAIM=tenant_id

# Claim name containing scopes (default: scope)
# Can be space-separated string or array
OAUTH2_SCOPE_CLAIM=scope

# =============================================================================
# Worker
# =============================================================================
# API key for worker to authenticate with control plane
FD_API_KEY=fd_dev_key_abc123
CONTROL_PLANE_URL=http://localhost:8080
WORKER_NAME=worker-1
WORKER_CONCURRENCY=4
WORKER_POLL_INTERVAL_MS=100
WORKER_MAX_RETRIES=3
WORKER_RETRY_DELAY_MS=1000

# =============================================================================
# Artifacts
# =============================================================================
FD_ARTIFACTS_PATH=./artifacts

# =============================================================================
# Evals
# =============================================================================
EVALS_DATASET_PATH=./evals/datasets
EVALS_REPORTS_PATH=./evals/reports
